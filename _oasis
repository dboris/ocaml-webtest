OASISFormat:    0.4
OCamlVersion:   >= 4.01
Name:           webtest
Version:        0.1.0
Authors:        John Else
License:        ISC
Synopsis:       Stripped down unit test framework compatible with js_of_ocaml
Plugins:        META (0.4), DevFiles (0.4)
BuildTools:     ocamlbuild

Library webtest
  Pack:               true
  Path:               lib
  Modules:            Suite, Zipper, Utils

Library webtest_runner
  Path:               runner
  BuildDepends:       js_of_ocaml, js_of_ocaml.ppx, webtest
  Findlibname:        runner
  Findlibparent:      webtest
  Modules:            Webtest_runner

Executable test_js
  Build$:             flag(tests)
  CompiledObject:     byte
  Path:               test
  MainIs:             test_js.ml
  BuildDepends:       js_of_ocaml, js_of_ocaml.ppx, webtest, webtest.runner
  Install:            false

Test test_js
  Command:            xvfb-run test/test_driver.py
  Run$:               flag(tests)

Executable test_ocaml
  Build$:             flag(tests)
  CompiledObject:     best
  Path:               test
  MainIs:             test_ocaml.ml
  BuildDepends:       webtest
  Install:            false

Test test_ocaml
  Command:            ./test_ocaml.native
  Run$:               flag(tests)

AlphaFeatures: ocamlbuild_more_args
Document webtest_api
  Type:                 ocamlbuild (0.4)
  BuildTools:           ocamldoc
  Title:                Stripped down unit test framework
  XOcamlBuildPath:      .
  XOcamlBuildExtraArgs:
    "-docflags '-colorize-code -short-functors -charset utf-8'"
  XOcamlBuildLibraries: webtest, webtest.runner
  Install:              false
