(** Types and functions for running unit tests. *)

exception TestFailure of string
(** The exception thrown by failing tests. *)

type result =
  | Error of exn           (** An unexpected error occurred in the test. *)
  | Failure of string      (** An assertion failed in the test. *)
  | Success                (** The test passed. *)
(** The result of running a single testcase. *)

type output = {
  log: string;             (** The logging produced while running the tests. *)
  results: result list;    (** The results of running the test. *)
}
(** The output generated by running a test. *)

val assert_true : string -> bool -> unit
(** [assert_bool label value] returns unit if [value] is true, and otherwise
    raises {{:#EXCEPTIONTestFailure}TestFailure}. *)

val assert_equal : ?printer:('a -> string) -> 'a -> 'a -> unit
(** [assert_equal a b] returns unit if [a] is equal to [b], and otherwise
    raises {{:#EXCEPTIONTestFailure}TestFailure}. *)

val run : Suite.t -> output
(** [run suite] runs [suite], and returns the logs and the test output. *)
